Вот пример документации для вашего проекта **URL Shortener с аутентификацией и статистикой**. Документация включает описание системы, инструкции по установке, API-спецификацию и рекомендации по использованию.

---

# Документация: URL Shortener с аутентификацией и статистикой

## Содержание
1. [Описание системы](#описание-системы)
2. [Требования к системе](#требования-к-системе)
3. [Установка и настройка](#установка-и-настройка)
    - [Локальная установка](#локальная-установка)
    - [Запуск через Docker](#запуск-через-docker)
4. [API-спецификация](#api-спецификация)
    - [Аутентификация](#аутентификация)
    - [Ссылки](#ссылки)
    - [Статистика](#статистика)
5. [Тестирование](#тестирование)
6. [Лицензия](#лицензия)

---

## Описание системы
Проект представляет собой веб приложение для сокращения ссылок (URL Shortener) с поддержкой аутентификации пользователей и сбора статистики по кликам. Приложение использует чистую архитектуру (Clean Architecture), что делает его легко расширяемым и поддерживаемым.

### Основные функции:
1. **Сокращение ссылок**:
    - Пользователи могут создавать короткие ссылки.
    - Каждая ссылка имеет уникальный хэш.
2. **Аутентификация и регистрация**:
    - Регистрация новых пользователей.
    - Вход в систему с использованием email и пароля.
    - Генерация JWT-токенов для авторизации.
3. **Статистика кликов**:
    - Сбор данных о кликах по ссылкам.
    - Группировка статистики по дням или месяцам.
4. **Модульность**:
    - Четкое разделение на слои (репозитории, сервисы, обработчики).
    - Использование GORM для работы с базой данных PostgreSQL.

---

## Требования к системе
Для запуска приложения необходимы следующие компоненты:
- **Go**: версия >= 1.20.
- **PostgreSQL**: база данных для хранения пользователей, ссылок и статистики.
- **Docker** (опционально): для запуска PostgreSQL в контейнере.
- **Node.js** (опционально): если используется фронтенд.

---

## Установка и настройка

### Локальная установка
1. **Клонируйте репозиторий**:
   ```bash
   git clone https://github.com/your-repo/url-shortener.git
   cd url-shortener
   ```

2. **Создайте файл `.env`**:
   Создайте файл `.env` в корне проекта и добавьте следующие переменные:
   ```env
   DSN="host=localhost user=postgres password=Daniar05 dbname=link port=5432 sslmode=disable"
   SECRET="RxbxgRcFCFes0enila83XSdWzejBmKuw4cHiPuMgiU8"
   ```
    - `DSN`: строка подключения к базе данных PostgreSQL.
    - `SECRET`: секретный ключ для генерации JWT-токенов.

3. **Установите зависимости**:
   ```bash
   go mod tidy
   ```

4. **Запустите миграции**:
   ```bash
   go run main.go migrate
   ```

5. **Запустите сервер**:
   ```bash
   go run main.go
   ```

6. **Проверьте работу сервера**:
   Сервер будет доступен по адресу:
   ```
   http://localhost:8080
   ```

---

### Запуск через Docker
1. **Убедитесь, что Docker установлен**:
   Установите Docker, если он еще не установлен: [https://www.docker.com/](https://www.docker.com/).

2. **Запустите PostgreSQL через Docker Compose**:
   ```bash
   docker-compose up -d
   ```

3. **Создайте файл `.env`**:
   Добавьте те же переменные, что и в разделе "Локальная установка".

4. **Запустите миграции и сервер**:
   ```bash
   go run main.go migrate
   go run main.go
   ```

---

## API-спецификация

### Аутентификация

#### POST /auth/register
Регистрация нового пользователя.

- **Тело запроса**:
  ```json
  {
    "email": "test@gmail.com",
    "password": "password",
    "name": "John Doe"
  }
  ```

- **Ответ**:
  ```json
  {
    "token": "jwt_token"
  }
  ```

#### POST /auth/login
Вход пользователя.

- **Тело запроса**:
  ```json
  {
    "email": "test@gmail.com",
    "password": "password"
  }
  ```

- **Ответ**:
  ```json
  {
    "token": "jwt_token"
  }
  ```

---

### Ссылки

#### POST /link
Создание новой ссылки.

- **Требуется авторизация**: JWT-токен в заголовке `Authorization`.

- **Тело запроса**:
  ```json
  {
    "url": "https://example.com"
  }
  ```

- **Ответ**:
  ```json
  {
    "url": "https://example.com",
    "hash": "abc123"
  }
  ```

#### GET /link/{hash}
Переход по сокращенной ссылке.

- **Пример**:
  ```
  GET /link/abc123
  ```

#### DELETE /link/{id}
Удаление ссылки по ID.

- **Требуется авторизация**: JWT-токен в заголовке `Authorization`.

---

### Статистика

#### GET /stat
Получение статистики по кликам.

- **Параметры**:
    - `from`: начальная дата (формат `YYYY-MM-DD`).
    - `to`: конечная дата (формат `YYYY-MM-DD`).
    - `by`: тип группировки (`day` или `month`).

- **Пример запроса**:
  ```
  GET /stat?from=2023-01-01&to=2023-12-31&by=month
  ```

- **Ответ**:
  ```json
  [
    {
      "period": "2023-01",
      "sum": 150
    },
    {
      "period": "2023-02",
      "sum": 200
    }
  ]
  ```

---

## Тестирование
Для тестирования используются стандартные инструменты Go (`testing`) и библиотека `SQLMock`.

- **Запуск тестов**:
  ```bash
  go test ./...
  ```

---

## Лицензия
Этот проект распространяется под лицензией MIT. Подробности см. в файле [LICENSE](LICENSE).

---

Если у вас есть вопросы или предложения, свяжитесь с автором проекта.

---

Эта документация предоставляет полное описание системы, инструкции по установке, API-спецификацию и рекомендации по тестированию. Если нужно что-то добавить или изменить, дайте знать!